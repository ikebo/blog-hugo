---
doc_type: weread-highlights-reviews
bookId: "26271721"
author: 贝特西·拜尔等
cover: https://wfqqreader-1252317822.image.myqcloud.com/cover/721/26271721/t7_26271721.jpg
reviewCount: 0
noteCount: 47
readingStatus: 在读
progress: 9%
totalReadDay: 3
readingTime: 1小时42分钟
readingDate: 2021-11-18
isbn: 9787121297267
lastReadDate: 2023-03-11

---
# 元数据
> [!abstract] SRE：Google运维解密
> - ![ SRE：Google运维解密|200](https://wfqqreader-1252317822.image.myqcloud.com/cover/721/26271721/t7_26271721.jpg)
> - 书名： SRE：Google运维解密
> - 作者： 贝特西·拜尔等
> - 简介： 在本书中，不仅展示了 Google 是如何运用各种计算机工具软件、硬件以持续部署和监控一些世界上最大的软件系统的。还展示了在运维过程中，Google 工程师团队是如何学习、成长、反复修改，最后定义出一套完整的工具和科技体系的过程。本书适合各种水平的运维工程师参考使用。
> - 出版时间 2016-10-01 00:00:00
> - ISBN： 9787121297267
> - 分类： 计算机-计算机综合
> - 出版社： 电子工业出版社
> - PC地址：https://weread.qq.com/web/reader/72c323007190dfe972c1295

# 高亮划线

## 赞誉

> 📌 SRE就是运行和管理这百万台服务器和众多分布式系统的关键。 
> ⏱ 2023-03-10 20:50:43 ^26271721-5-545-574

> 📌 Google的SRE实践正在成为DevOps的标准。 
> ⏱ 2023-03-10 20:52:10 ^26271721-5-1805-1831

> 📌 SRE强调的是对问题和故障的自动处理，而非人工干预；再者，按照SRE的约定，开发人员自行负责程序上线部署更新，毕竟开发人员对自己开发的程序更熟悉，易于处理程序上线过程中遇到的问题。 
> ⏱ 2023-03-10 20:52:50 ^26271721-5-1988-2078

> 📌 SRE（Site Reliability Engineering） 
> ⏱ 2023-03-10 20:54:57 ^26271721-5-3349-3382

## 译者序

> 📌 维问题在这个平台上似乎都被无限放大了。但是与此同时，Google恰恰又是利用最传统、最朴素的软件工程方法将其一一解决的 
> ⏱ 2023-03-10 20:58:20 ^26271721-6-734-793

> 📌 SRE是一群天生的怀疑论者，我们怀疑一切宣传起来“高大上”的技术，以及任何“神奇”的产品——我们只想看具体的设计架构、实现细节，以及真实的监控图表。 
> ⏱ 2023-03-10 20:59:12 ^26271721-6-823-897

> 📌 pragmatic 
> ⏱ 2023-03-10 20:59:22 ^26271721-6-933-942

> 📌 我们坚信只要不断地解决根源问题，服务质量就一定会得到提升。 
> ⏱ 2023-03-10 21:00:06 ^26271721-6-1094-1123

## 前言

> 📌 SRE，站点可靠性工程师 
> ⏱ 2023-03-10 21:02:02 ^26271721-7-1048-1060

> 📌 相比最后的软件结果、架构设计而言，真实的设计过程、作者本身的思考经历更有价值。实现细节永远只是短暂存在的，但是文档化的设计过程却是无价之宝。 
> ⏱ 2023-03-10 21:04:29 ^26271721-7-2294-2364

#### Google的解决之道：SRE

> 📌 目前来看，UNIX 系统内部细节和1～3层网络知识是Google最看重的两类额外的技术能力。 
> ⏱ 2023-03-10 21:33:40 ^26271721-12-1036-1082

> 📌 SRE团队应该倾向于将基本的运维工作全部消除，全力投入在研发任务上。因为整个系统应该可以自主运行，可以自动修复问题。 
> ⏱ 2023-03-10 21:35:46 ^26271721-12-1942-2000

> 📌 这个名词的核心思想是尽早将IT相关技术与产品设计和开发过程结合起来，着重强调自动化而不是人工操作，以及利用软件工程手段执行运维任务等。 
> ⏱ 2023-03-10 21:40:24 ^26271721-12-3226-3293

#### SRE方法论

> 📌 这意味着产品研发部门和SRE部门可以在这个范围内将这个预算用于新功能上线或者产品的创新等任何事情。 
> ⏱ 2023-03-10 21:46:30 ^26271721-13-2622-2671

> 📌 错误预算可以用于什么范畴呢？研发团队需要用这个预算上线新功能，吸引新用户。理想情况下，我们应该使用错误预算来最大化新功能上线的速度，同时保障服务质量。这个基本模型建立起来之后， 
> ⏱ 2023-03-10 21:46:53 ^26271721-13-2700-2788

> 📌 这个改动虽小，意义却很大。一次“生产事故”不再是一件坏事，而仅仅是创新流程中一个不可避免的环节，两个团队通过协作共同管理它。 
> ⏱ 2023-03-10 21:47:15 ^26271721-13-2982-3044

> 📌 意味着收到警报的用户需要立即执行某种操作，目标是解决某种已经发生的问题，或者是避免即将发生的问题。 
> ⏱ 2023-03-10 21:53:35 ^26271721-13-3458-3507

> 📌 平时没有人需要关注日志信息，但是日志信息依然被收集起来以备调试和事后分析时使用。正确的做法是平时没人会去主动阅读日志，除非有特殊需要。 
> ⏱ 2023-03-10 21:53:22 ^26271721-13-3717-3784

> 📌 运维手册中记录的清晰调试步骤和分析方法对处理问题的人是不可或缺的。因此，Google SRE将大部分工作重心放在“运维手册”的维护上， 
> ⏱ 2023-03-10 21:54:55 ^26271721-13-4232-4299

> 📌 SRE的经验告诉我们，大概 70% 的生产事故由某种部署的变更而触发。变更管理的最佳实践是使用自动化来完成以下几个项目：● 采用渐进式发布机制。● 迅速而准确地检测到问题的发生。 
> ⏱ 2023-03-10 21:55:18 ^26271721-13-4504-4651

> 📌 。SRE的目标是根据一个预设的延迟目标部署和维护足够的容量。 
> ⏱ 2023-03-11 09:23:18 ^26271721-13-6292-6322

#### 小结

> 📌 由一个简单的想法“我是一名软件工程师，这是我如何来应付重复劳动的办法”而生 
> ⏱ 2023-03-11 09:23:57 ^26271721-14-495-532

#### 硬件

> 📌 B4 是基于SDN网络技术（使用OpenFlow标准协议）构建的 
> ⏱ 2023-03-11 09:54:22 ^26271721-16-2120-2152

> 📌 同时可以利用动态带宽管理优化网络连接，最大化平均带宽 
> ⏱ 2023-03-11 09:54:35 ^26271721-16-2172-2198

#### 管理物理服务器的系统管理软件

> 📌 每个数据中心园区都配备专门的团队负责维护硬件设备和数据中心基础设施。 
> ⏱ 2023-03-11 09:55:53 ^26271721-17-681-715

> 📌 （例如：3CPU核心，2GB 内存等）。有了这样的信息，Borg 可以将所有的任务实例合理分配在不同的物理服务器上，以提高每个物理服务器的利用率 
> ⏱ 2023-03-11 09:59:44 ^26271721-17-1960-2032

> 📌 我们发现，一个缓慢的不断重启的实例要好过一个永远不重启一直泄露资源的实例。 
> ⏱ 2023-03-11 10:01:18 ^26271721-17-2196-2233

> 📌 。这些存储系统和开源的 Lustre，以及Hadoop文件系统（HDFS）类似。 
> ⏱ 2023-03-11 10:01:46 ^26271721-17-2389-2429

> 📌 我们使用一个基于OpenFlow协议的软件定义网络（SDN） 
> ⏱ 2023-03-11 10:04:09 ^26271721-17-3538-3568

> 📌 带宽控制器（Bandwidth Enforcer,BwE）负责管理所有可用带宽。 
> ⏱ 2023-03-11 13:53:49 ^26271721-17-3736-3776

> 📌 我们的全球负载均衡系统（GSLB）在三个层面上负责负载均衡工作：● 利用地理位置信息进行负载均衡DNS请求（例如www.google.com的解析，具体描述参见第19章）。● 在用户服务层面进行负载均衡，例如YouTube 和 Google Maps。● 在远程调用（RPC）层面进行负载均衡（具体描述参见第20章）。 
> ⏱ 2023-03-11 13:54:47 ^26271721-17-3923-4197

#### 其他系统软件

> 📌 Chubby（参见文献[Bur06]）集群锁服务提供一个与文件系统类似的API用来操作锁。 
> ⏱ 2023-03-11 13:56:09 ^26271721-18-569-614

> 📌 Chubby 使用Paxos协议来提供分布式一致性（具体描述参看第23章）。 
> ⏱ 2023-03-11 13:56:21 ^26271721-18-638-676

> 📌 Chubby适合存放那种对一致性要求非常高的数据。例如BNS服务就使用Chubby存放BNS路径与IP地址：端口的对应关系。 
> ⏱ 2023-03-11 13:56:55 ^26271721-18-844-934

#### 软件基础设施

> 📌 每个软件服务器都有一个内置的HTTP服务，提供一些调试信息和统计信息，供在线调试、监控等使用。 
> ⏱ 2023-03-11 13:58:43 ^26271721-19-539-586

> 📌 称为Stubby 
> ⏱ 2023-03-11 13:58:59 ^26271721-19-643-651

> 📌 gRPC。 
> ⏱ 2023-03-11 13:59:04 ^26271721-19-667-672

> 📌 有时候，一个程序的内部函数调用也会用RPC实现，因为未来有需要时，可以很容易地将其重构为多个组件并行的架构。GSLB 对RPC的负载均衡有良好的支持。 
> ⏱ 2023-03-11 13:59:34 ^26271721-19-755-830

#### 研发环境

> 📌 Google编译软件可以通过并行机制处理超大型编译请求 
> ⏱ 2023-03-11 14:01:28 ^26271721-20-857-884

> 📌 每当一个CL被提交时，所有被这个CL直接或间接影响到的测试都会运行一次。 
> ⏱ 2023-03-11 14:02:17 ^26271721-20-905-941

#### 莎士比亚搜索：一个示范服务

> 📌 该DNS请求最后会到达Google的DNS服务器。Google的DNS 服务器会请求GSLB系统。GSLB 通过全局流量负载信息，决定使用哪个IP地址回复用户。 
> ⏱ 2023-03-11 14:05:45 ^26271721-21-1354-1434

> 📌 N+2模式 
> ⏱ 2023-03-11 14:10:27 ^26271721-21-2665-2670

> 📌 N+1。这样做的原因是，我们选择在极端情况下牺牲一些用户体验以降低成本。因为当容量不足时，GSLB会将南美洲的用户流量导向其他可用的数据中心，可以节省大概20%的硬件资源。在有条件的地方，我们还会将任务实例分散在不同的集群中，以便更好地提升可靠性。 
> ⏱ 2023-03-11 14:12:05 ^26271721-21-3094-3218

## 第Ⅱ部分 指导思想

> 📌 广义软件工程中（不仅仅是运维部分）的一个关键思想是保持简单。 
> ⏱ 2023-03-11 17:20:45 ^26271721-22-1326-1356

#### 管理风险

> 📌 我们的目标是：明确地将运维风险与业务风险对应起来。我们会努力提高一项服务的可靠性，但不会超过该服务需要的可靠性。 
> ⏱ 2023-03-11 17:25:43 ^26271721-24-1056-1112

> 📌 也不会超过太多，否则会浪费为系统增加新功能、清理技术债务或者降低运营成本的机会。 
> ⏱ 2023-03-11 17:26:00 ^26271721-24-1149-1189

#### 度量服务的风险

> 📌 例如，一个每天可用性目标为99.99%的系统，一天要接受2.5M个请求。它每天出现少于250个错误即可达到预计的可用性目标。 
> ⏱ 2023-03-11 17:33:58 ^26271721-25-1570-1632

# 读书笔记

# 本书评论
