---
doc_type: weread-highlights-reviews
bookId: "25462424"
author: 朱忠华
cover: https://cdn.weread.qq.com/weread/cover/5/YueWen_25462424/t7_YueWen_25462424.jpg
reviewCount: 0
noteCount: 14
readingStatus: 在读
progress: 7%
totalReadDay: 5
readingTime: 0小时52分钟
readingDate: 2021-10-29
isbn: 9787121359026
lastReadDate: 2021-11-10

---
# 元数据
> [!abstract] 深入理解Kafka：核心设计与实践原理
> - ![ 深入理解Kafka：核心设计与实践原理|200](https://cdn.weread.qq.com/weread/cover/5/YueWen_25462424/t7_YueWen_25462424.jpg)
> - 书名： 深入理解Kafka：核心设计与实践原理
> - 作者： 朱忠华
> - 简介： 本书从Kafka的基础概念切入，循序渐进地转入对其内部原理的剖析。本书主要阐述了Kafka中生产者客户端、消费者客户端、主题与分区、日志存储、原理解析、监控管理、应用扩展及流式计算等内容。虽然Kafka的内核使用Scala语言编写，但本书基本以Java语言作为主要的示例语言，方便大多数读者的理解。虽然本书没有明确的界定，但总体上可以划分为三个部分：基础篇、原理篇和扩展篇，前4章为基础篇，包括基础概念、生产者、消费者，以及主题与分区，学习完这4章的内容完全可以应对绝大多数的开发场景。第5章至第8章为原理篇，包括对日志存储、协议设计、控制器、组协调器、事务、一致性、可靠性等内容的探究，学习完这4章的内容可以让读者对Kafka有一个深刻的认知。最后4章从应用扩展层面来做讲解，可以归类为扩展篇，主要内容包括监控、应用工具、应用扩展（延时队列、重试队列、死信队列、消息轨迹等）、与Spark的集成等，让读者可以对Kafka的生态有一个更加全面的认知。本
> - 出版时间 2019-01-01 00:00:00
> - ISBN： 9787121359026
> - 分类： 计算机-编程设计
> - 出版社： 电子工业出版社
> - PC地址：https://weread.qq.com/web/reader/e9a32a0071848698e9a39b8

# 高亮划线

### 1.1 基本概念

> 📌 在Kafka中还有两个特别重要的概念—主题（Topic）与分区（Partition） 
> ⏱ 2021-10-30 00:42:06 ^25462424-5-1330-1372

> 📌 。同一主题下的不同分区包含的消息是不同的，分区在存储层面可以看作一个可追加的日志（Log）文件 
> ⏱ 2021-10-30 00:42:43 ^25462424-5-1550-1597

> 📌 消息在被追加到分区日志文件的时候都会分配一个特定的偏移量（offs 
> ⏱ 2021-10-30 00:43:17 ^25462424-5-1598-1631

> 📌 offset是消息在分区中的唯一标识，Kafka通过它来保证消息在分区内的顺序性，不过offset并不跨越分区，也就是说，Kafka保证的是分区有序而不是主题有序。 
> ⏱ 2021-10-30 00:43:58 ^25462424-5-1635-1717

> 📌 每一条消息被发送到broker之前，会根据分区规则选择存储到哪个具体的分区。如果分区规则设定得合理，所有的消息都可以均匀地分配到不同的 
> ⏱ 2021-10-30 00:45:16 ^25462424-5-2132-2199

> 📌 在创建主题的时候可以通过指定的参数来设置分区的个数， 
> ⏱ 2021-10-30 00:45:42 ^25462424-5-2258-2284

> 📌 从follower副本中重新选举新的leader副本对外提供服务。 
> ⏱ 2021-10-30 00:46:50 ^25462424-5-2528-2561

> 📌 当消费者宕机后恢复上线时可以根据之前保存的消费位置重新拉取需要的消息进行消费，这样就不会造成消息丢失。 
> ⏱ 2021-10-30 00:48:28 ^25462424-5-3140-3191

> 📌 而ISR集合中最小的LEO即为分区的HW，对消费者而言只能消费HW之前的消息。 
> ⏱ 2021-10-30 10:56:43 ^25462424-5-4591-4630

> 📌 。Kafka使用的这种ISR的方式则有效地权衡了数据可靠性和性能之间的关系。 
> ⏱ 2021-10-30 11:01:16 ^25462424-5-6561-6599

### 2.1 客户端开发

> 📌 它不仅是消息的附加信息，还可以用来计算分区号进而可以让消息 
> ⏱ 2021-11-09 18:32:51 ^25462424-11-1585-1614

> 📌 发往特定的分区。 
> ⏱ 2021-11-09 18:32:55 ^25462424-11-1614-1622

> 📌 前面提及消息以主题为单位进行归类，而这个key可以让消息再进行二次归类，同一个key的消息会被划分到同一个分区中，详情参见2.1.4节。 
> ⏱ 2021-11-09 18:33:13 ^25462424-11-1622-1690

> 📌 。注意这里并非需要所有的broker地址，因为生产者会从给定的broker里查找到其他broker的信息。不过建议至少要设置两个以上的broker 地址信息， 
> ⏱ 2021-11-10 13:22:03 ^25462424-11-2227-2306

# 读书笔记

# 本书评论
